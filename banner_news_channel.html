<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Meteorologia</title>
    
    <!-- CSS nom√©s per millores (no cr√≠tic) -->
    <style>
        /* TRANSICIONS I ANIMACIONS (no cr√≠ticas) */
        .content-group {
            transition: transform 0.8s ease-in-out !important;
        }
        
        /* RESPONSIVE (no cr√≠tic) */
        @media (max-width: 600px) {
            .data-container {
                flex-direction: column !important;
            }
            
            .data-box {
                width: 100% !important;
                flex: none !important;
            }
        }
        
        /* AJUSTOS IPHONE */
        @supports (-webkit-touch-callout: none) {
            * {
                -webkit-font-smoothing: antialiased !important;
            }
        }
    </style>
</head>
<body style="margin:0;padding:0;background-color:#ffffff;display:flex;justify-content:center;align-items:center;min-height:100vh;overflow:hidden;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;">
    
    <!-- CONTENIDOR PRINCIPAL -->
    <div class="weather-container" style="width:95vw;max-width:800px;min-width:300px;background-color:white;overflow:hidden;position:relative;box-shadow:0 5px 15px rgba(0,0,0,0.1);margin:0 auto;">
        
        <div class="scroll-container" style="position:relative;height:380px;overflow:hidden;">
            
            <!-- GRUP 1: GIRONA -->
            <div class="content-group active" id="group1" style="position:absolute;width:100%;height:380px;left:0;background-color:white;transform:translateY(0);">
                
                <!-- CAP√áALERA VERMELLA -->
                <div class="location-header" style="background-color:#c00;color:white;padding:0 20px;text-align:center;height:65px;display:flex;align-items:center;justify-content:center;">
                    <div class="location-name" style="font-size:26px;font-weight:bold;text-transform:uppercase;letter-spacing:0.5px;line-height:1;padding:0;margin:0;display:flex;align-items:center;justify-content:center;height:100%;width:100%;">
                        GIRONA
                    </div>
                </div>
                
                <!-- CAIXES DE DADES -->
                <div class="data-container" style="display:flex;justify-content:space-between;padding:20px;gap:15px;background-color:white;height:180px;">
                    
                    <div class="data-box" style="flex:1;background-color:#fff;border:2px solid #e0e0e0;border-radius:8px;padding:15px;text-align:center;display:flex;flex-direction:column;justify-content:center;box-shadow:0 3px 8px rgba(0,0,0,0.08);height:100%;">
                        <div class="data-title" style="font-size:16px;font-weight:700;color:#333;margin-bottom:8px;text-transform:uppercase;">
                            Temperatura m√†xima del dia
                        </div>
                        <div class="data-value" style="font-size:36px;font-weight:800;color:#000;margin:10px 0;">
                            14.5<span class="data-unit" style="font-size:22px;color:#000;font-weight:700;margin-left:4px;">¬∞C</span>
                        </div>
                    </div>
                    
                    <div class="data-box" style="flex:1;background-color:#fff;border:2px solid #e0e0e0;border-radius:8px;padding:15px;text-align:center;display:flex;flex-direction:column;justify-content:center;box-shadow:0 3px 8px rgba(0,0,0,0.08);height:100%;">
                        <div class="data-title" style="font-size:16px;font-weight:700;color:#333;margin-bottom:8px;text-transform:uppercase;">
                            Temperatura m√≠nima del dia
                        </div>
                        <div class="data-value" style="font-size:36px;font-weight:800;color:#000;margin:10px 0;">
                            7.3<span class="data-unit" style="font-size:22px;color:#000;font-weight:700;margin-left:4px;">¬∞C</span>
                        </div>
                    </div>
                    
                    <div class="data-box" style="flex:1;background-color:#fff;border:2px solid #e0e0e0;border-radius:8px;padding:15px;text-align:center;display:flex;flex-direction:column;justify-content:center;box-shadow:0 3px 8px rgba(0,0,0,0.08);height:100%;">
                        <div class="data-title" style="font-size:16px;font-weight:700;color:#333;margin-bottom:8px;text-transform:uppercase;">
                            Pluja acumulada
                        </div>
                        <div class="data-value" style="font-size:36px;font-weight:800;color:#000;margin:10px 0;">
                            2.8<span class="data-unit" style="font-size:22px;color:#000;font-weight:700;margin-left:4px;">mm</span>
                        </div>
                    </div>
                    
                </div>
                
                <!-- PEU DE P√ÄGINA (AMB ESPAI GARANTIT) -->
                <div class="footer" style="padding:15px 20px;text-align:center;background-color:#fff;border-top:2px solid #f0f0f0;height:70px;display:flex;flex-direction:column;justify-content:center;position:absolute;bottom:0;width:100%;box-sizing:border-box;">
                    <div class="update-info" style="font-size:16px;color:#333;margin-bottom:3px;font-weight:800;">
                        Actualitzat: 13:45 - Data: 23/12/2025
                    </div>
                    <div class="source" style="font-size:14px;color:#666;font-weight:700;">
                        Font: https://www.meteo.cat/
                    </div>
                </div>
                
            </div>
            
            <!-- GRUP 2: FORNELLS DE LA SELVA -->
            <div class="content-group next" id="group2" style="position:absolute;width:100%;height:380px;left:0;background-color:white;transform:translateY(-100%);">
                
                <!-- CAP√áALERA VERMELLA -->
                <div class="location-header" style="background-color:#c00;color:white;padding:0 20px;text-align:center;height:65px;display:flex;align-items:center;justify-content:center;">
                    <div class="location-name" style="font-size:26px;font-weight:bold;text-transform:uppercase;letter-spacing:0.5px;line-height:1;padding:0;margin:0;display:flex;align-items:center;justify-content:center;height:100%;width:100%;">
                        FORNELLS DE LA SELVA
                    </div>
                </div>
                
                <!-- CAIXES DE DADES -->
                <div class="data-container" style="display:flex;justify-content:space-between;padding:20px;gap:15px;background-color:white;height:180px;">
                    
                    <div class="data-box" style="flex:1;background-color:#fff;border:2px solid #e0e0e0;border-radius:8px;padding:15px;text-align:center;display:flex;flex-direction:column;justify-content:center;box-shadow:0 3px 8px rgba(0,0,0,0.08);height:100%;">
                        <div class="data-title" style="font-size:16px;font-weight:700;color:#333;margin-bottom:8px;text-transform:uppercase;">
                            Temperatura m√†xima del dia
                        </div>
                        <div class="data-value" style="font-size:36px;font-weight:800;color:#000;margin:10px 0;">
                            13.8<span class="data-unit" style="font-size:22px;color:#000;font-weight:700;margin-left:4px;">¬∞C</span>
                        </div>
                    </div>
                    
                    <div class="data-box" style="flex:1;background-color:#fff;border:2px solid #e0e0e0;border-radius:8px;padding:15px;text-align:center;display:flex;flex-direction:column;justify-content:center;box-shadow:0 3px 8px rgba(0,0,0,0.08);height:100%;">
                        <div class="data-title" style="font-size:16px;font-weight:700;color:#333;margin-bottom:8px;text-transform:uppercase;">
                            Temperatura m√≠nima del dia
                        </div>
                        <div class="data-value" style="font-size:36px;font-weight:800;color:#000;margin:10px 0;">
                            6.5<span class="data-unit" style="font-size:22px;color:#000;font-weight:700;margin-left:4px;">¬∞C</span>
                        </div>
                    </div>
                    
                    <div class="data-box" style="flex:1;background-color:#fff;border:2px solid #e0e0e0;border-radius:8px;padding:15px;text-align:center;display:flex;flex-direction:column;justify-content:center;box-shadow:0 3px 8px rgba(0,0,0,0.08);height:100%;">
                        <div class="data-title" style="font-size:16px;font-weight:700;color:#333;margin-bottom:8px;text-transform:uppercase;">
                            Pluja acumulada
                        </div>
                        <div class="data-value" style="font-size:36px;font-weight:800;color:#000;margin:10px 0;">
                            1.2<span class="data-unit" style="font-size:22px;color:#000;font-weight:700;margin-left:4px;">mm</span>
                        </div>
                    </div>
                    
                </div>
                
                <!-- PEU DE P√ÄGINA (AMB ESPAI GARANTIT) -->
                <div class="footer" style="padding:15px 20px;text-align:center;background-color:#fff;border-top:2px solid #f0f0f0;height:70px;display:flex;flex-direction:column;justify-content:center;position:absolute;bottom:0;width:100%;box-sizing:border-box;">
                    <div class="update-info" style="font-size:16px;color:#333;margin-bottom:3px;font-weight:800;">
                        Actualitzat: 13:45 - Data: 23/12/2025
                    </div>
                    <div class="source" style="font-size:14px;color:#666;font-weight:700;">
                        Font: https://www.meteo.cat/
                    </div>
                </div>
                
            </div>
            
        </div>
    </div>

    <script>
        // ============================================================================
        // INICIALITZACI√ì SEGURA (espera que tot estigui estable)
        // ============================================================================
        function inicialitzarBanner() {
            console.log('üöÄ Inicialitzant banner...');
            
            const grup1 = document.getElementById('group1');
            const grup2 = document.getElementById('group2');
            
            if (!grup1 || !grup2) {
                console.error('‚ùå No es troben els grups');
                return;
            }
            
            // 1. FOR√áA les posicions inicials (iPhone necessita aix√≤)
            grup1.style.transform = 'translateY(0)';
            grup1.style.opacity = '1';
            grup1.style.zIndex = '2';
            
            grup2.style.transform = 'translateY(-100%)';
            grup2.style.opacity = '1';
            grup2.style.zIndex = '1';
            
            // 2. For√ßa un reflow (critical per iPhone)
            void grup1.offsetWidth;
            void grup2.offsetWidth;
            
            // 3. Assegura que les classes estan correctes
            grup1.className = 'content-group active';
            grup2.className = 'content-group next';
            
            console.log('‚úÖ Banner inicialitzat correctament');
            
            // 4. Inicia el scroll despr√©s d'un moment
            setTimeout(iniciarScroll, 1000);
        }
        
        // ============================================================================
        // SISTEMA DE SCROLL
        // ============================================================================
        let grupActual = 1;
        let intervalId;
        let enTransicio = false;
        
        function canviarPoblacio() {
            if (enTransicio) return;
            enTransicio = true;
            
            const grup1 = document.getElementById('group1');
            const grup2 = document.getElementById('group2');
            
            if (grupActual === 1) {
                // GIRONA ‚Üí FORNELLS
                grup1.classList.remove('active');
                grup1.classList.add('out');
                grup1.style.transform = 'translateY(100%)';
                
                grup2.classList.remove('next');
                grup2.classList.add('active');
                grup2.style.transform = 'translateY(0)';
                
                grupActual = 2;
            } else {
                // FORNELLS ‚Üí GIRONA
                grup2.classList.remove('active');
                grup2.classList.add('out');
                grup2.style.transform = 'translateY(100%)';
                
                grup1.classList.remove('next');
                grup1.classList.add('active');
                grup1.style.transform = 'translateY(0)';
                
                grupActual = 1;
            }
            
            // Reset despr√©s de la transici√≥
            setTimeout(function() {
                if (grupActual === 1) {
                    // Girona visible, Fornells amagat a dalt
                    grup2.classList.remove('active', 'out');
                    grup2.classList.add('next');
                    grup2.style.transform = 'translateY(-100%)';
                    grup2.style.transition = 'none';
                    grup2.style.zIndex = '1';
                    grup1.style.zIndex = '2';
                    
                    void grup2.offsetWidth;
                    grup2.style.transition = '';
                } else {
                    // Fornells visible, Girona amagat a dalt
                    grup1.classList.remove('active', 'out');
                    grup1.classList.add('next');
                    grup1.style.transform = 'translateY(-100%)';
                    grup1.style.transition = 'none';
                    grup1.style.zIndex = '1';
                    grup2.style.zIndex = '2';
                    
                    void grup1.offsetWidth;
                    grup1.style.transition = '';
                }
                enTransicio = false;
            }, 800);
        }
        
        function iniciarScroll() {
            if (intervalId) clearInterval(intervalId);
            intervalId = setInterval(canviarPoblacio, 15000);
            console.log('üîÑ Scroll autom√†tic activat (15s)');
        }
        
        function aturarScroll() {
            if (intervalId) {
                clearInterval(intervalId);
                intervalId = null;
            }
        }
        
        // ============================================================================
        // CARREGA DE LA P√ÄGINA
        // ============================================================================
        
        // M√®tode 1: DOMContentLoaded (r√†pid)
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOM carregat');
            setTimeout(inicialitzarBanner, 50);
        });
        
        // M√®tode 2: window.load (m√©s lent per√≤ segur)
        window.addEventListener('load', function() {
            console.log('üñºÔ∏è P√†gina completament carregada');
            // Backup: si DOMContentLoaded no ho ha fet, ho fem ara
            setTimeout(inicialitzarBanner, 100);
        });
        
        // M√®tode 3: Timeout final (ultim backup)
        setTimeout(inicialitzarBanner, 500);
        
        // Control de visibilitat
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                aturarScroll();
            } else {
                setTimeout(iniciarScroll, 1000);
            }
        });
        
        window.addEventListener('blur', aturarScroll);
        window.addEventListener('focus', function() {
            setTimeout(iniciarScroll, 1000);
        });
        
        console.log('üë®‚Äçüíª Script carregat, esperant inicialitzaci√≥...');
    </script>
</body>
</html>
